<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Document</title>

</head>
<body>

        <header>
            <div class="title">Contact Form</div>
            <button class="hamburger" id="hamburgerBtn" aria-label="Open navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>


       </header>
        <nav id="sideNav">
            <a href="index.html">Home</a>
            <a href="#services">Services</a>
            <a href="#contact">Contact</a>
        </nav>
 
     
    
     
        
        
    <menu>
        <h1 style="text-align: center; margin-bottom: 20px;">Web Development Services</h1>
        <p style="text-align: center; max-width: 600px; margin: 0 auto 20px auto;">
            A well-coded website can significantly enhance your small business's online presence, attract more customers, and streamline operations. I offer custom web development services tailored to your business needs.
        </p>
        <form id="contact" style="max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px;">
            <label for="name">Name:</label>
            <input type="text" id="name" name="Name" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="Email" required>

            <label for="business">Business Name:</label>
            <input type="text" id="business" name="Business Name">

            <label for="website">Current Website (if any):</label>
            <input type="url" id="website" name="Current Website">

            <label for="services">Services Interested In:</label>
            <select id="services" name="Services Interested In" multiple>
                <option value="website-design">Website Design</option>
                <option value="ecommerce">Marketing Solutions</option>
                <option value="seo">Graphic Design</option>
                <option value="maintenance">Website Maintenance</option>
                <option value="other">Other</option>
            </select>

            <label for="message">Additional Information:</label>
            <textarea id="message" name="Additional Information" rows="4"></textarea>

            <button id="submit" type="button" style="padding: 10px; background-color: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer;">Submit</button>
        </form>
     </menu>
      

        


 
   








    <a href="index.html" style="color:var(--text); position: fixed; bottom: 10px; left: 10px; text-decoration: underline;">&larr; Back to Home</a>
</body>
    <!-- this script tag placed after body so that query selectors can function properly -->
    <script defer>

       
        // Select the contact button using a querySelector 
        const submitButton = document.querySelector('#contact button');        
        // click behavior for submit button 
        submitButton.addEventListener("click", async (e) => {
            // prevent default form submission behavior
            e.preventDefault();
            // selecting the form and creating form data object
            const form= document.querySelector('#contact');
            const formData = new FormData(form);
            
            // build request paremeters using user input from form data object
            const params = new URLSearchParams();
            params.append('from', formData.get('Name') + ' <' + formData.get('Email') + '>');
            params.append('to', 'xavierbowman71@gmail.com');
            params.append('subject', 'New Contact Form Submission from ' + formData.get('Name'));
            params.append('text',
                'Name: ' + formData.get('Name') + '\n' +
                'Email: ' + formData.get('Email') + '\n' +
                'Business Name: ' + formData.get('Business Name') + '\n' +
                'Current Website: ' + formData.get('Current Website') + '\n' +
                'Services Interested In: ' + formData.getAll('Services Interested In').join(', ') + '\n' +
                'Additional Information: ' + formData.get('Additional Information') + '\n'
            );
            // TODO: MAKE THIS MORE SECURE
            const apiKey = `880894d50f3a6450b17ecae25de981a7-97129d72-489f7731`;
            // Send the email request using fetch
            const response = fetch("https://api.mailgun.net/v3/sandbox54eabfd15c7d449f845e681ba1c7cdc4.mailgun.org/messages", {
                method: "POST",
                body: params,
                headers: {
                    Authorization: `Basic ${btoa(`api:${apiKey}`)}`,
                },
            })
            .catch((error) => {
                // TODO: Handle error responses
            });
        });


        // Within the event handler, build an object for the request body with fields from, to, subject, text. Use form data to create the body

        // Use fetch to send the POST request to https://api.mailgun.net/v3/YOUR_DOMAIN_NAME/messages
        // Hint: Replace YOUR_DOMAIN_NAME with window.location.hostname

        // Handle the response and show a success or error message
    </script>
</html>